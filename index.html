<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YuSmile Uganda</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        /* Basic Reset and Styling */
        body { margin:0; font-family: Arial, sans-serif; background:#fff; }
        .container { max-width:1200px; margin:0 auto; padding:0 15px; }
        header, footer { background:#f9f9f9; padding:15px 0; }
        nav ul { list-style:none; margin:0; padding:0; display:flex; gap:15px; flex-wrap:wrap; }
        nav ul li a { text-decoration:none; color:#333; }
        .btn { display:inline-block; padding:10px 20px; background:#007BFF; color:#fff; border:none; border-radius:4px; cursor:pointer; text-decoration:none; }
        .btn-donate { background:#28a745; }
        .page-container { display:none; padding:50px 0; }
        .page-container.active { display:block; }
        .hero-slider { position:relative; overflow:hidden; height:400px; }
        .hero-slider .slide { position:absolute; top:0; left:0; width:100%; height:100%; background-size:cover; background-position:center; opacity:0; transition:opacity 0.5s; }
        .hero-slider .slide.active { opacity:1; }
        .hero-content { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); text-align:center; color:#fff; }
        .slider-arrow { position:absolute; top:50%; transform:translateY(-50%); background:rgba(0,0,0,0.5); color:#fff; border:none; padding:10px; cursor:pointer; }
        .slider-arrow.prev { left:10px; }
        .slider-arrow.next { right:10px; }
        .slider-nav { position:absolute; bottom:10px; left:50%; transform:translateX(-50%); display:flex; gap:5px; }
        .slider-dot { width:10px; height:10px; border-radius:50%; background:#fff; opacity:0.5; cursor:pointer; }
        .slider-dot.active { opacity:1; }
        .mission-grid, .programs-grid, .impact-stats, .partners-grid { display:flex; gap:20px; flex-wrap:wrap; }
        .mission-card, .program-card, .impact-stats .stat-item, .partner-card { background:#f9f9f9; padding:20px; border-radius:8px; flex:1; min-width:250px; }
        .program-img, .partner-img { width:100%; height:200px; background-size:cover; background-position:center; border-radius:8px; }
        .form-group { margin-bottom:15px; }
        .form-group input, .form-group select, .form-group textarea { width:100%; padding:10px; border-radius:4px; border:1px solid #ccc; }
        .contact-details { display:flex; gap:20px; flex-wrap:wrap; }
        .contact-card { background:#f9f9f9; padding:20px; border-radius:8px; flex:1; min-width:200px; text-align:center; }
        footer .footer-content { display:flex; gap:20px; flex-wrap:wrap; }
        footer .footer-column { flex:1; min-width:200px; }
        .social-links a { margin-right:10px; color:#333; text-decoration:none; }
        footer .footer-bottom { text-align:center; margin-top:20px; font-size:0.9rem; color:#666; }
        .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); justify-content:center; align-items:center; z-index:9999; }
        .modal-content { background:#fff; padding:30px; border-radius:8px; width:90%; max-width:500px; position:relative; }
        .close-modal { position:absolute; top:10px; right:15px; font-size:24px; cursor:pointer; }
        .donation-options { display:flex; gap:10px; flex-wrap:wrap; margin-top:15px; }
        .donation-amount { padding:10px 15px; background:#f0f0f0; cursor:pointer; border-radius:4px; }
        .donation-amount.active { background:#007BFF; color:#fff; }
        .custom-amount { display:flex; gap:10px; margin-top:15px; }
    </style>
</head>
<body>

<!-- Header -->
<header>
    <div class="container header-container">
        <div class="logo">
            <img src="YuSmilelogo.png" alt="YuSmile Uganda Logo" style="height: 50px;">
            <div class="logo-text">
                <span>Creating Sustainable Impact</span>
            </div>
        </div>
        <button class="mobile-menu-btn">
            <i class="fas fa-bars"></i>
        </button>
        <nav>
            <ul>
                <li><a href="#" class="nav-link" data-page="home">Home</a></li>
                <li><a href="#" class="nav-link" data-page="about">About Us</a></li>
                <li><a href="#" class="nav-link" data-page="programs">Programs</a></li>
                <li><a href="#" class="nav-link" data-page="get-involved">Get Involved</a></li>
                <li><a href="#" class="nav-link" data-page="news">News</a></li>
                <li><a href="#" class="nav-link" data-page="contact">Contact</a></li>
                <li><a href="#" class="btn btn-donate">Donate Now</a></li>
            </ul>
        </nav>
    </div>
</header>

<!-- Pages -->
<div id="home" class="page-container active">
    <!-- Hero Slider Section -->
    <section class="hero-slider">
        <div class="slide active" style="background-image: url('YuSmile1.jpeg');"></div>
        <div class="slide" style="background-image: url('YuSmile2.jpeg');"></div>
        <div class="slide" style="background-image: url('YuSmile3.jpeg');"></div>
        <div class="slide" style="background-image: url('YuSmile4.jpeg');"></div>
        
        <div class="hero-content">
            <h2>Empowering Communities, Creating Sustainable Impact</h2>
            <p>YuSmile Uganda is dedicated to improving lives through education, healthcare, and community development initiatives across Uganda.</p>
            <div class="hero-buttons">
                <a href="#" class="btn nav-link" data-page="get-involved">Get Involved</a>
                <a href="#" class="btn btn-donate">Donate Now</a>
            </div>
        </div>
        
        <button class="slider-arrow prev"><i class="fas fa-chevron-left"></i></button>
        <button class="slider-arrow next"><i class="fas fa-chevron-right"></i></button>
        <div class="slider-nav">
            <div class="slider-dot active"></div>
            <div class="slider-dot"></div>
            <div class="slider-dot"></div>
            <div class="slider-dot"></div>
        </div>
    </section>

    <!-- Mission Section -->
    <section class="mission">
        <div class="container">
            <div class="section-title">
                <h2>Our Mission</h2>
                <p>We work to create sustainable impact through programs that address the most pressing needs in Ugandan communities.</p>
            </div>
            <div class="mission-grid">
                <div class="mission-card">
                    <i class="fas fa-graduation-cap"></i>
                    <h3>Education</h3>
                    <p>Providing quality education opportunities for children and youth, with a focus on marginalized communities.</p>
                </div>
                <div class="mission-card">
                    <i class="fas fa-heartbeat"></i>
                    <h3>Healthcare</h3>
                    <p>Improving access to healthcare services and promoting health education in underserved areas.</p>
                </div>
                <div class="mission-card">
                    <i class="fas fa-hands-helping"></i>
                    <h3>Community Development</h3>
                    <p>Empowering communities through sustainable development projects and capacity building.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Programs Section -->
    <section class="programs">
        <div class="container">
            <div class="section-title">
                <h2>Our Programs</h2>
                <p>Discover the initiatives that are making a real difference in the lives of Ugandans.</p>
            </div>
            <div class="programs-grid">
                <div class="program-card">
                    <div class="program-img" style="background-image: url('YuSmile6.jpg');"></div>
                    <div class="program-content">
                        <h3>Book Donations</h3>
                        <p>Providing scholarships, school supplies, and mentorship programs to empower the next generation.</p>
                        <a href="#" class="btn nav-link" data-page="programs" style="margin-top: 15px;">Learn More</a>
                    </div>
                </div>
                <div class="program-card">
                    <div class="program-img" style="background-image: url('https://images.unsplash.com/photo-1551601651-2a8555f1a136?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1632&q=80');"></div>
                    <div class="program-content">
                        <h3>Healthcare Access Program</h3>
                        <p>Mobile clinics and health education campaigns reaching remote communities across Uganda.</p>
                        <a href="#" class="btn nav-link" data-page="programs" style="margin-top: 15px;">Learn More</a>
                    </div>
                </div>
                <div class="program-card">
                    <div class="program-img" style="background-image: url('https://images.unsplash.com/photo-1532629345422-7515f3d16bb6?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80');"></div>
                    <div class="program-content">
                        <h3>Women's Empowerment</h3>
                        <p>Skills training and microfinance programs to help women achieve economic independence.</p>
                        <a href="#" class="btn nav-link" data-page="programs" style="margin-top: 15px;">Learn More</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Impact Section -->
    <section class="impact">
        <div class="container">
            <div class="section-title">
                <h2>Our Impact</h2>
                <p>Through the support of our donors and volunteers, we've been able to make a meaningful difference.</p>
            </div>
            <div class="impact-stats">
                <div class="stat-item">
                    <div class="stat-number">500</div>
                    <div class="stat-text">Children Educated</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">10</div>
                    <div class="stat-text">Communities Served</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">10</div>
                    <div class="stat-text">Healthcare Visits</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">20</div>
                    <div class="stat-text">Women Empowered</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Donation Section -->
    <section class="donation">
        <div class="container">
            <h2>Support Our Mission</h2>
            <p>Your donation helps us continue our work in education, healthcare, and community development across Uganda.</p>
            
            <div class="donation-options">
                <div class="donation-amount active" data-amount="5000">UGX 5,000</div>
                <div class="donation-amount" data-amount="10000">UGX 10,000</div>
                <div class="donation-amount" data-amount="20000">UGX 20,000</div>
                <div class="donation-amount" data-amount="30000">UGX 30,000</div>
                <div class="donation-amount" data-amount="50000">UGX 50,000</div>
            </div>
            
            <div class="custom-amount">
                <input type="number" placeholder="Donate any other amount (UGX)" id="custom-amount">
                <button id="set-custom-amount">Set</button>
            </div>
            
            <a href="#" class="btn btn-donate" id="donate-button" style="margin-top: 20px;">Donate UGX 5,000 Now</a>
            
            <p style="margin-top: 20px; font-size: 0.9rem;">
                <i class="fas fa-lock"></i> Secure payment processed by Pesapal
            </p>
        </div>
    </section>

    <!-- Key Partners Section -->
    <section class="partners">
        <div class="container">
            <div class="section-title">
                <h2 style="color: black;">Our Key Partners and Sponsors</h2>
                <p>We collaborate with individuals, organizations and institutions that share our vision for sustainable development in Uganda.</p>
            </div>
            <div class="partners-grid">
                <div class="partner-card">
                    <div class="partner-img" style="background-image: url('YuSmile5.png');"></div>
                    <div class="partner-content">
                        <h3>The Late Wendy Cooling</h3>
                        <p>Ms.Wendy Cooling donated books to YuSmile Uganda and also donated funds to cover the costs for YuSmile website development.</p>
                        <a href="https://www.google.com/search?client=ms-android-samsung-ss&sca_esv=bdbe2dd8fffd653b&sxsrf=AE3TifPIv-MHqa2eihYQ9Y2IRKiEqHgYxw:1760602162532&q=wendy+cooling&source=lnms&fbs=AIIjpHxU7SXXniUZfeShr2fp4giZ1Y6MJ25_tmWITc7uy4KIeuYzzFkfneXafNx6OMdA4MQRJc_t_TQjwHYrzlkIauOK_IaFSQcTHs2AgJbmYqOLNr-gBKF7I3dfcWHoQ8Rv9DjgCkddkmI70Eyfx6YeKCiQpQ6vp-564Wh7Ux48nEGedWNIKpMOjgODVmfE1geG6VKILIklDXLwRh1QTq_557DgED4jgQ&sa=X&ved=2ahUKEwit-fOToqiQAxV6V0EAHdWgEXEQ0pQJegQICRAB&biw=1366&bih=633&dpr=1" class="btn" style="margin-top: 15px;">Learn More</a>
                    </div>
                </div>
                <div class="partner-card">
                    <div class="partner-img" style="background-image: url('partner2.jpg');"></div>
                    <div class="partner-content">
                        <h3>Dr.Chris Landon</h3>
                        <p>Collaborating on mobile clinic services and community health education programs.</p>
                        <a href="#" class="btn" style="margin-top: 15px;">Learn More</a>
                    </div>
                </div>
                <div class="partner-card">
                    <div class="partner-img" style="background-image: url('partner3.jpg');"></div>
                    <div class="partner-content">
                        <h3>Community Development Trust</h3>
                        <p>Partnering on sustainable agriculture and economic empowerment projects.</p>
                        <a href="#" class="btn" style="margin-top: 15px;">Learn More</a>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

<!-- About, Programs, Get Involved, News, Contact pages remain unchanged (send separate JS for nav switching) -->

<!-- Donation Modal -->
<div class="modal" id="donation-modal">
    <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h3>Make a Donation</h3>
        <p>Thank you for supporting YuSmile Uganda. Your donation will help us create sustainable impact in communities across Uganda.</p>
        
        <div style="background: #f0f7ff; padding: 15px; border-radius: 4px; margin-bottom: 20px;">
            <h4 style="margin: 0; color: var(--primary);">
                Donation Amount: <span id="display-amount">UGX 5,000</span>
            </h4>
        </div>
        
        <form id="donation-form">
            <div class="form-group">
                <label for="firstName">First Name *</label>
                <input type="text" id="firstName" required>
            </div>
            
            <div class="form-group">
                <label for="lastName">Last Name *</label>
                <input type="text" id="lastName" required>
            </div>
            
            <div class="form-group">
                <label for="donor-email">Email Address *</label>
                <input type="email" id="donor-email" required>
            </div>
            
            <div class="form-group">
                <label for="donor-phone">Phone Number *</label>
                <input type="tel" id="donor-phone" required placeholder="e.g., 0758927639">
            </div>

            <div class="form-group">
                <label for="payment-method">Payment Method *</label>
                <select id="payment-method" required>
                    <option value="pesapal">Pesapal</option>
                    <option value="mtn">MTN Mobile Money</option>
                </select>
            </div>

            <input type="hidden" id="donation-amount-final" value="5000">

            <button type="submit" class="btn btn-donate" style="width: 100%;">
                <i class="fas fa-lock"></i> Proceed to Secure Payment
            </button>

            <p style="text-align: center; margin-top: 15px; font-size: 0.8rem; color: #666;">
                <i class="fas fa-shield-alt"></i> Your payment is securely processed by the selected payment provider
            </p>
        </form>
    </div>
</div>

<!-- Footer -->
<footer>
    <div class="container footer-container">
        <div class="footer-content">
            <div class="footer-column">
                <h4>About YuSmile</h4>
                <p>YuSmile Uganda is dedicated to improving lives through education, healthcare, and community development initiatives across Uganda.</p>
            </div>
            <div class="footer-column">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="#" class="nav-link" data-page="home">Home</a></li>
                    <li><a href="#" class="nav-link" data-page="about">About Us</a></li>
                    <li><a href="#" class="nav-link" data-page="programs">Programs</a></li>
                    <li><a href="#" class="nav-link" data-page="get-involved">Get Involved</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h4>Follow Us</h4>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            &copy; 2025 YuSmile Uganda. All Rights Reserved.
        </div>
    </div>
</footer>

<script>
    // --- Page Navigation ---
    const navLinks = document.querySelectorAll('.nav-link');
    const pages = document.querySelectorAll('.page-container');

    navLinks.forEach(link => {
        link.addEventListener('click', e => {
            e.preventDefault();
            const target = link.getAttribute('data-page');
            pages.forEach(page => page.classList.remove('active'));
            const activePage = document.getElementById(target);
            if(activePage) activePage.classList.add('active');
        });
    });

    // --- Hero Slider ---
    const slides = document.querySelectorAll('.hero-slider .slide');
    const dots = document.querySelectorAll('.slider-dot');
    const prevBtn = document.querySelector('.slider-arrow.prev');
    const nextBtn = document.querySelector('.slider-arrow.next');
    let currentSlide = 0;

    function showSlide(index){
        slides.forEach(s => s.classList.remove('active'));
        dots.forEach(d => d.classList.remove('active'));
        slides[index].classList.add('active');
        dots[index].classList.add('active');
    }

    function nextSlide(){ currentSlide = (currentSlide+1)%slides.length; showSlide(currentSlide); }
    function prevSlide(){ currentSlide = (currentSlide-1+slides.length)%slides.length; showSlide(currentSlide); }

    nextBtn.addEventListener('click', nextSlide);
    prevBtn.addEventListener('click', prevSlide);
    dots.forEach((dot,i)=>dot.addEventListener('click',()=>{currentSlide=i; showSlide(i);}));
    setInterval(nextSlide, 7000);

    // --- Donation Modal & Handling ---
    const modal = document.getElementById('donation-modal');
    const closeModal = document.querySelector('.close-modal');
    const donationForm = document.getElementById('donation-form');
    const donationAmountFinal = document.getElementById('donation-amount-final');
    const displayAmount = document.getElementById('display-amount');
    let selectedAmount = 5000;

    function formatUGX(amount){ return 'UGX ' + parseInt(amount).toLocaleString('en-UG'); }
    function updateDonateButton(){ document.querySelectorAll('.btn-donate').forEach(b=>b.textContent=`Donate ${formatUGX(selectedAmount)} Now`); }

    closeModal.addEventListener('click', ()=>modal.style.display='none');
    window.addEventListener('click', e => { if(e.target===modal) modal.style.display='none'; });

    const donationAmounts = document.querySelectorAll('.donation-amount');
    const customAmountInput = document.getElementById('custom-amount');
    const setCustomAmountBtn = document.getElementById('set-custom-amount');

    donationAmounts.forEach(amount => {
        amount.addEventListener('click', function(){
            donationAmounts.forEach(a=>a.classList.remove('active'));
            this.classList.add('active');
            selectedAmount=parseInt(this.getAttribute('data-amount'));
            donationAmountFinal.value=selectedAmount;
            displayAmount.textContent=formatUGX(selectedAmount);
            updateDonateButton();
        });
    });

    setCustomAmountBtn.addEventListener('click', ()=>{
        const customAmount = parseInt(customAmountInput.value);
        if(customAmount && customAmount>0){
            selectedAmount=customAmount;
            donationAmounts.forEach(a=>a.classList.remove('active'));
            donationAmountFinal.value=selectedAmount;
            displayAmount.textContent=formatUGX(selectedAmount);
            updateDonateButton();
        } else alert('Please enter a valid amount');
    });

    customAmountInput.addEventListener('keypress', e=>{ if(e.key==='Enter'){ e.preventDefault(); setCustomAmountBtn.click(); } });

    document.querySelectorAll('.btn-donate').forEach(button=>{
        button.addEventListener('click', e=>{
            e.preventDefault();
            donationAmountFinal.value=selectedAmount;
            displayAmount.textContent=formatUGX(selectedAmount);
            modal.style.display='flex';
        });
    });

    donationForm.addEventListener('submit', async function(e){
        e.preventDefault();
        const paymentMethod=document.getElementById('payment-method').value;
        const formData={
            amount:selectedAmount,
            firstName:document.getElementById('firstName').value.trim(),
            lastName:document.getElementById('lastName').value.trim(),
            email:document.getElementById('donor-email').value.trim(),
            phone:document.getElementById('donor-phone').value.trim(),
            reference:'YUSMILE-'+Date.now()+'-'+Math.random().toString(36).substr(2,9),
            currency:'UGX',
            description:'Donation to YuSmile Uganda',
            payment_method:paymentMethod
        };

        if(!formData.firstName||!formData.lastName||!formData.email||!formData.phone){ alert('Please fill in all required fields'); return; }
        if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(formData.email)){ alert('Please enter a valid email'); return; }
        if(!/^(?:\+256|0)[17]\d{8}$/.test(formData.phone.replace(/\s+/g,''))){ alert('Invalid Ugandan phone number'); return; }

        const submitBtn=donationForm.querySelector('button[type="submit"]');
        const originalText=submitBtn.textContent;
        submitBtn.innerHTML='<i class="fas fa-spinner fa-spin"></i> Redirecting...';
        submitBtn.disabled=true;

        try{
            let apiUrl='';
            if(paymentMethod==='pesapal') apiUrl='/api/pesapal-payment';
            if(paymentMethod==='mtn') apiUrl='/api/mtn-momo-payment';

            const response=await fetch(apiUrl,{
                method:'POST',
                headers:{'Content-Type':'application/json'},
                body:JSON.stringify(formData)
            });

            const data=await response.json();
            console.log(paymentMethod,'response:',data);

            if(paymentMethod==='pesapal'&&data.success&&data.redirect_url){
                window.location.href=data.redirect_url;
            } else {
                alert('Payment initiated. Please check your phone for MoMo prompt.');
                modal.style.display='none';
            }

        } catch(error){
            console.error('Payment Error:',error);
            alert('Error: '+error.message);
            submitBtn.textContent=originalText;
            submitBtn.disabled=false;
        }
    });

    updateDonateButton();
</script>

</body>
</html>
